<div class="page">
  <div class="hero auth-hero">
    <div class="hero-line"></div>
  </div>

  <div class="auth-container">
    <div class="auth-card card">
      <div class="auth-tabs">
        <button 
          class="tab-btn" 
          [class.active]="isLoginMode"
          (click)="isLoginMode = true; error = ''"
        >
          Login
        </button>
        <button 
          class="tab-btn" 
          [class.active]="!isLoginMode"
          (click)="isLoginMode = false; error = ''"
        >
          Sign Up
        </button>
      </div>

      <form (ngSubmit)="onSubmit()" class="auth-form">
        <div class="form-group">
          <label for="username">
            Username
            <span class="field-hint" *ngIf="!isLoginMode">Must be at least 4 characters long</span>
          </label>
          <input 
            id="username"
            type="text" 
            [(ngModel)]="username"
            name="username"
            placeholder="Enter your username"
            autocomplete="username"
            [class.invalid]="usernameError && !isLoginMode"
            (blur)="!isLoginMode && validateUsername()"
            required
          >
          <span class="error-hint" *ngIf="usernameError && !isLoginMode">{{ usernameError }}</span>
        </div>

        <div class="form-group">
          <label for="password">
            Password
            <span class="field-hint" *ngIf="!isLoginMode">At least 6 characters with 1 special character (!?#$%...)</span>
          </label>
          <input 
            id="password"
            type="password" 
            [(ngModel)]="password"
            name="password"
            placeholder="Enter your password"
            autocomplete="current-password"
            [class.invalid]="passwordError && !isLoginMode"
            (blur)="!isLoginMode && validatePassword()"
            required
          >
          <span class="error-hint" *ngIf="passwordError && !isLoginMode">{{ passwordError }}</span>
        </div>

        <div class="form-group" *ngIf="!isLoginMode">
          <label for="confirmPassword">Confirm Password</label>
          <input 
            id="confirmPassword"
            type="password" 
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            placeholder="Confirm your password"
            autocomplete="new-password"
            required
          >
        </div>

        <div class="error-message" *ngIf="error">
          {{ error }}
        </div>

        <button 
          type="submit" 
          class="btn btn-primary btn-full"
          [disabled]="loading"
        >
          {{ loading ? 'Please wait...' : (isLoginMode ? 'Login' : 'Sign Up') }}
        </button>
      </form>

      <div class="auth-footer">
        <p *ngIf="isLoginMode">
          Don't have an account? 
          <a (click)="toggleMode()" class="link">Sign up</a>
        </p>
        <p *ngIf="!isLoginMode">
          Already have an account? 
          <a (click)="toggleMode()" class="link">Login</a>
        </p>
      </div>
    </div>
  </div>
</div>
